from pathlib import Path
import threading
import argparse
import sys
import os

class fileThread(threading.Thread):

	def run(self):
		filename = r'\test.txt'
		filePath = r'D:\Program Files\Shkevin\cs544' + filename
		print(filePath)
		global stopThreads;

		print("running".format(self.getName()))
		print(os.path.exists(filePath))
		while not stopThreads:
			try:
				if os.path.exists(filePath):
					file = open(filePath, "r")
					contents = file.read()
					print(contents)
					# stopThreads = True
					file.close()
				stopThreads = True
			except IOError:
				stopThreads = True
				print("Can't open file")

	def stop(self):
		self._stop_event.set()

if __name__ == '__main__':
	parser = argparse.ArgumentParser()
	parser.add_argument("-t", "--threads",action='store', type=int , \
		help='Number of threads to run', required=False)
	args = parser.parse_args()
	stopThreads = False
	workers = []

	if args.threads is not None:
		threads = args.threads
	else:
		threads = 10

	for x in range(threads):
		mythread = fileThread(name = "Thread-{}".format(x + 1))
		workers.append(mythread)
		mythread.start()
	


